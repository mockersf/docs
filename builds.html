<!DOCTYPE html>
<html>
  <head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-60508041-1"></script>

<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-60508041-1');
</script>

<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=775" />
<title>Builds - Concourse CI</title>
<link rel="stylesheet" type="text/css" href="css/normalize.css" />
<link rel="stylesheet" type="text/css" href="css/pipeline.css" />
<link rel="stylesheet" type="text/css" href="css/iosevka.css" />
<link rel="stylesheet" type="text/css" href="css/booklit.css" />
<link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />
<link href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700|Roboto+Slab:300,400,700" rel="stylesheet" />
<script src="js/search.js"></script>
  </head>
  <body>
    <div class="top-logo">
  <a href="/">Concourse</a>
</div>

<nav class="top-nav">
  
  <a href="docs.html" class="active">Docs</a>
  
  <a href="download.html">Download</a>
  
  <a href="project.html">Project</a>
  
  <a href="community.html">Community</a>
  
  <a href="learning.html">Learning</a>
  
</nav>

<div class="top-search">
  <div id="search"></div>
</div>

<script type="text/javascript">
  Elm.Main.init({
    node: document.getElementById('search')
  });
</script>

    <div class="page-nav">
      







  

  
  <div class="context">
    <nav>
      <div class="top">
        
        <span class="section-number">1</span>
        
        
  <a href="docs.html"  class="active">Docs</a>

      </div>

      <div class="children">
        <table>
        
          <tr>
            
              <td class="number-cell" align="right">1.1&nbsp;</td>
            
            <td class="title-cell">
  <a href="install.html" >Install</a>
</td>
          </tr>
        
          <tr>
            
              <td class="number-cell" align="right">1.2&nbsp;</td>
            
            <td class="title-cell">
  <a href="auth.html" >Auth &amp; Teams</a>
</td>
          </tr>
        
          <tr>
            
              <td class="number-cell" align="right">1.3&nbsp;</td>
            
            <td class="title-cell">
  <a href="fly.html" >The <code>fly</code> CLI</a>
</td>
          </tr>
        
          <tr>
            
              <td class="number-cell" align="right">1.4&nbsp;</td>
            
            <td class="title-cell">
  <a href="pipelines.html" >Pipelines</a>
</td>
          </tr>
        
          <tr>
            
              <td class="number-cell" align="right">1.5&nbsp;</td>
            
            <td class="title-cell">
  <a href="resources.html" >Resources</a>
</td>
          </tr>
        
          <tr>
            
              <td class="number-cell" align="right">1.6&nbsp;</td>
            
            <td class="title-cell">
  <a href="jobs.html" >Jobs</a>
</td>
          </tr>
        
          <tr>
            
              <td class="number-cell" align="right">1.7&nbsp;</td>
            
            <td class="title-cell">
  <a href="tasks.html" >Tasks</a>
</td>
          </tr>
        
          <tr>
            
              <td class="number-cell" align="right">1.8&nbsp;</td>
            
            <td class="title-cell">
  <a href="builds.html"  class="self">Builds</a>
</td>
          </tr>
        
          <tr>
            
              <td class="number-cell" align="right">1.9&nbsp;</td>
            
            <td class="title-cell">
  <a href="operation.html" >Operation</a>
</td>
          </tr>
        
        </table>
      </div>
    </nav>
  </div>
  





<div class="context">
  <div class="page-toc">
    <nav>
      <div class="top">
        
        <span class="section-number">1.8</span>
        
        
  <a href="builds.html"  class="self">Builds</a>

      </div>

      
<div class="children">
  <table>
    
      <tr>
        
          <td class="number-cell" align="left"></td>
        
        <td class="title-cell">
          <a href="builds.html#fly-builds"><code>fly builds</code></a>

          
        </td>
      </tr>
    
      <tr>
        
          <td class="number-cell" align="left"></td>
        
        <td class="title-cell">
          <a href="builds.html#fly-intercept"><code>fly intercept</code></a>

          
        </td>
      </tr>
    
      <tr>
        
          <td class="number-cell" align="left"></td>
        
        <td class="title-cell">
          <a href="builds.html#fly-abort-build"><code>fly abort-build</code></a>

          
        </td>
      </tr>
    
      <tr>
        
          <td class="number-cell" align="left"></td>
        
        <td class="title-cell">
          <a href="builds.html#fly-watch"><code>fly watch</code></a>

          
        </td>
      </tr>
    
  </table>
</div>

    </nav>
  </div>
</div>




    </div>

    <div class="page-aside"></div>

    <div class="page-content">
      <div class="section" id="section_builds">
  
  <h1 class="section-header"><a class="anchor" name="builds" href="#builds"></a><span class="section-number">1.8 </span>Builds</h1>
  

  <p>A build is an execution of a <em>build plan</em>, which is either configured as a sequence of <a href="steps.html">steps</a> in a <a href="jobs.html">job</a>, or submitted directly to Concourse as a one-off build via <a href="running-tasks.html#fly-execute"><code>fly execute</code></a>.</p><p>Containers and volumes are created as <a href="get-step.html"><code>get</code> step</a>s, <a href="put-step.html"><code>put</code> step</a>s, and <a href="task-step.html"><code>task</code> step</a>s run. When a build completes successfully, these containers go away.</p><p>A failed build&#39;s containers and volumes are kept around so that you can debug the build via <a href="builds.html#fly-intercept"><code>fly intercept</code></a>. If the build belongs to a <a href="jobs.html">job</a>, the containers will go away when the next build starts. If the build is a one-off, its containers will be removed immediately, so make sure you intercept while it&#39;s running if you want to debug.</p>

  
    
      <div class="section" id="section_fly-builds">
  
  <h2 class="section-header"><a class="anchor" name="fly-builds" href="#fly-builds"></a><code>fly builds</code></h2>
  

  <p>To list the most recent builds, run:</p><div class="highlight"><pre style="">$ fly -t example builds
</pre></div><p>To list the builds of a job, run:</p><div class="highlight"><pre style="">$ fly -t example builds -j pipeline-name/job-name
</pre></div><p>This can be useful for periodically monitoring the state of a job. The output also works well with tools like <code>awk</code> and <code>grep</code>.</p><p>By default the most recent 50 builds are shown. To see more builds, use the <code>-c</code> flag, like so:</p><div class="highlight"><pre style="">$ fly -t example builds -c <span style="color:#1abc9c;font-weight:bold">100</span>
</pre></div>

  
    
  
</div>
    
      <div class="section" id="section_fly-intercept">
  
  <h2 class="section-header"><a class="anchor" name="fly-intercept" href="#fly-intercept"></a><code>fly intercept</code></h2>
  

  <p>Sometimes it&#39;s helpful to be on the same machine as your tasks so that you can profile or inspect them as they run or see the state the machine at the end of a run. Due to Concourse running tasks in containers on remote machines this would typically be hard to access.</p><p>To this end, there is a <code>fly intercept</code> command that will give you an interactive shell inside the specified container. Containers are identified by a few things, so you may need to specify a few flags to hone down the results. If there are multiple containers that the flags could refer to, an interactive prompt will show up allowing you to disambiguate.</p><p>For example, running the following will run a task and then enter the finished task&#39;s container:</p><div class="highlight"><pre style="">$ fly -t example execute
$ fly -t example intercept --step build
</pre></div><blockquote class="aside"><p>When intercepting a task running on a Windows worker, you will need to specifically tell fly to to run <code>powershell</code>:</p><div class="highlight"><pre style="">$ fly -t example intercept powershell
</pre></div></blockquote><p>Containers are around for a short time after a build finishes in order to allow people to intercept them.</p><p>You can also intercept builds that were run in your pipeline. By using <code>--job</code>, <code>--build</code>, and <code>--step</code> you can intercept a specific step from a build of a job in your pipeline. These flags also have short forms, like so:</p><div class="highlight"><pre style="">$ fly -t example intercept -j some-pipeline/some-job -b some-build -s some-step
</pre></div><p>Note that <code>--build</code> can be omitted, and will default to the most recent build of the job. One-off builds can be reached by passing in their build ID to <code>--build</code> which can be found on the build list page.</p><p>The <code>--step</code> flag can also be omitted; this will let you pick the step interactively if you don&#39;t know the exact name.</p><p>Resource checking containers can also be intercepted with <code>--check</code> or <code>-c</code>:</p><div class="highlight"><pre style="">$ fly -t example intercept --check some-pipeline/some-resource
</pre></div><p>A specific command can also be given, e.g. <code>fly intercept ps auxf</code> or <code>fly intercept htop</code>. This allows for patterns such as <code>watch fly intercept ps auxf</code>, which will continuously show the process tree of the current build&#39;s task, even as the &#34;current build&#34; changes.</p><p>The working directory and any relevant environment variables (e.g. those having come from <a href="tasks.html#task-params"><code><strong>params</strong></code></a>) used by the original process will also be used for the process run by intercept.</p>

  
    
  
</div>
    
      <div class="section" id="section_fly-abort-build">
  
  <h2 class="section-header"><a class="anchor" name="fly-abort-build" href="#fly-abort-build"></a><code>fly abort-build</code></h2>
  

  <p>To abort a build of a job, run:</p><div class="highlight"><pre style="">$ fly -t example abort-build --job my-pipeline/my-job --build <span style="color:#1abc9c;font-weight:bold">3</span>
</pre></div><p>This will cancel build <code>3</code> of the <code>my-job</code> job in the <code>my-pipeline</code> pipeline.</p>

  
    
  
</div>
    
      <div class="section" id="section_fly-watch">
  
  <h2 class="section-header"><a class="anchor" name="fly-watch" href="#fly-watch"></a><code>fly watch</code></h2>
  

  <p>Concourse emits streaming colored logs on the website but it can be helpful to have the logs availiable to the command line. (e.g. so that they can be processed by other commands).</p><p>The <code>watch</code> command can be used to do just this. You can also view builds that are running in your pipeline, or builds that have already finished.</p><p>Note that unlike <a href="running-tasks.html#fly-execute"><code>fly execute</code></a>, killing <code>fly watch</code> via <code>SIGINT</code> or <code>SIGTERM</code> will <em>not</em> abort the build.</p><p>To watch the most recent one-off build, just run <code>fly watch</code> with no arguments. To watch a specific build (one-off or no), pass <code>--build</code> with the ID of the build to watch. This ID is available at the start of <a href="running-tasks.html#fly-execute"><code>fly execute</code></a>&#39;s output or by browsing to the builds list in the web UI.</p><p>By using the <code>--job</code> and <code>--build</code> flags you can pick out a specific build of a job to watch. For example, the following command will either show the archived logs for an old build if it has finished running or it will stream the current logs if the build is still in progress.</p><div class="highlight"><pre style="">$ fly -t example watch --job my-pipeline/tests --build <span style="color:#1abc9c;font-weight:bold">52</span>
</pre></div><p>If the <code>--job</code> flag is specified and <code>--build</code> is omitted, the most recent build of the specified job will be selected.</p>

  
    
  
</div>
    
  
</div>

      <nav class="prev-next">
      
        <div class="prev">
          prev:

          
          <span class="section-number">1.7</span>
          

          <a href="tasks.html">Tasks</a>
        </div>
      

      
        <div class="next">
          next:

          
          <span class="section-number">1.9</span>
          

          <a href="operation.html">Operation</a>
        </div>
      
      </nav>
    </div>

    <ul class="improve-docs">
      <li><img src="images/github.svg" /> <a href="https://github.com/concourse/docs">help improve this site</a></li>
      <li><img src="images/booklit.svg" /> powered by <a href="https://vito.github.io/booklit">Booklit</a></li>
    </ul>
  </body>
</html>